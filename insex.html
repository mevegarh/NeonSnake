<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Snake â€” Realistic Style with Sound</title>
<style>
  body {
    margin: 0;
    background: radial-gradient(circle at center, #001018, #000);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #eee;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }
  #gameCanvas {
    border: 8px solid;
    border-image: linear-gradient(45deg, #22c55e, #16a34a, #0ea5a4) 1;
    box-shadow: 0 0 30px rgba(0,255,128,0.6);
    border-radius: 16px;
    background: radial-gradient(circle at center, #021522, #000);
    display: block;
  }
  .hud {
    margin: 12px 0;
    display: flex;
    justify-content: space-between;
    width: 600px;
    max-width: 90%;
    font-size: 18px;
    font-weight: bold;
  }
  .controls {
    margin-top: 8px;
    display: flex;
    gap: 12px;
  }
  button {
    background: linear-gradient(90deg,#22c55e,#0ea5a4);
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    color: white;
    font-weight: bold;
    transition: 0.2s;
  }
  button:hover {
    filter: brightness(1.2);
  }
  #overlay {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    display:flex;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,0.7);
    color:#fff;
    font-size:22px;
    font-weight:bold;
    flex-direction:column;
    visibility:hidden;
  }
  #overlay button {
    margin-top:12px;
  }
</style>
</head>
<body>
<div class="hud">
  <div>Score: <span id="score">0</span></div>
  <div>Best: <span id="best">0</span></div>
</div>
<canvas id="gameCanvas" width="600" height="600"></canvas>
<div class="controls">
  <button id="pauseBtn">Pause</button>
  <button id="restartBtn">Restart</button>
  <button id="soundBtn">Sound: On</button>
</div>
<div id="overlay">
  <div id="overText">Game Over</div>
  <button onclick="resetGame()">Restart</button>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");
const bestEl = document.getElementById("best");
const overlay = document.getElementById("overlay");
const overText = document.getElementById("overText");

const GRID = 25;
const CELL = canvas.width / GRID;

let snake, dir, food, score, best=0, running=true, loop;
let soundOn = true;

// --- Sound functions ---
function playBeep(freq=440, duration=0.08, vol=0.1){
  if(!soundOn) return;
  try {
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    osc.type = "sine";
    osc.frequency.value = freq;
    gainNode.gain.value = vol;
    osc.connect(gainNode);
    gainNode.connect(audioCtx.destination);
    osc.start();
    setTimeout(()=>{ osc.stop(); audioCtx.close(); }, duration*1000);
  } catch(e){}
}

// optional background music
let bgAudio = new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3");
bgAudio.loop = true;
bgAudio.volume = 0.1;
bgAudio.play().catch(()=>{}); // autoplay may need user gesture

function initGame(){
  snake = [{x:5,y:5}];
  dir = {x:1,y:0};
  food = {x:10,y:10};
  score = 0;
  running = true;
  overlay.style.visibility = "hidden";
  updateScore();
  if(loop) clearInterval(loop);
  loop = setInterval(gameLoop,120);
}

function updateScore(){
  scoreEl.textContent = score;
  if(score>best){ best=score; bestEl.textContent=best; }
}

function drawSnake(){
  snake.forEach((seg,i)=>{
    const x=(seg.x+0.5)*CELL, y=(seg.y+0.5)*CELL;
    ctx.beginPath();
    ctx.fillStyle=i===0?"#22c55e":"#0ea5a4";
    ctx.shadowColor="#22ff99";
    ctx.shadowBlur=12;
    ctx.arc(x,y,CELL*0.4,0,Math.PI*2);
    ctx.fill();
    ctx.shadowBlur=0;
    if(i===0){
      ctx.fillStyle="#000";
      ctx.beginPath();
      ctx.arc(x-CELL*0.15,y-CELL*0.1,CELL*0.1,0,Math.PI*2);
      ctx.arc(x+CELL*0.15,y-CELL*0.1,CELL*0.1,0,Math.PI*2);
      ctx.fill();
    }
  });
}

function drawFood(){
  const x=(food.x+0.5)*CELL, y=(food.y+0.5)*CELL, r=CELL*0.35;
  const g=ctx.createRadialGradient(x,y,2,x,y,r);
  g.addColorStop(0,"#ff8888");
  g.addColorStop(1,"#bb0000");
  ctx.fillStyle=g;
  ctx.shadowColor="#ff4444";
  ctx.shadowBlur=20;
  ctx.beginPath();
  ctx.arc(x,y,r,0,Math.PI*2);
  ctx.fill();
  ctx.shadowBlur=0;
}

function moveSnake(){
  const head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};
  if(head.x<0||head.y<0||head.x>=GRID||head.y>=GRID) return gameOver();
  for(let s of snake){ if(s.x===head.x&&s.y===head.y) return gameOver(); }
  snake.unshift(head);
  if(head.x===food.x&&head.y===food.y){
    score++;
    updateScore();
    playBeep(800,0.08,0.1); // sound when eating
    food={x:Math.floor(Math.random()*GRID),y:Math.floor(Math.random()*GRID)};
  } else snake.pop();
}

function gameLoop(){
  if(!running) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  moveSnake();
  drawSnake();
  drawFood();
  drawBorder();
}

function drawBorder(){
  ctx.lineWidth=6;
  const g=ctx.createLinearGradient(0,0,canvas.width,canvas.height);
  g.addColorStop(0,"#22c55e");
  g.addColorStop(1,"#0ea5a4");
  ctx.strokeStyle=g;
  ctx.strokeRect(0,0,canvas.width,canvas.height);
}

function gameOver(){
  running=false;
  overlay.style.visibility="visible";
  overText.textContent="Game Over! Score: "+score;
  playBeep(220,0.3,0.2); // game over sound
}

function resetGame(){ initGame(); }

window.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp"&&dir.y===0) dir={x:0,y:-1};
  if(e.key==="ArrowDown"&&dir.y===0) dir={x:0,y:1};
  if(e.key==="ArrowLeft"&&dir.x===0) dir={x:-1,y:0};
  if(e.key==="ArrowRight"&&dir.x===0) dir={x:1,y:0};
});

document.getElementById("pauseBtn").onclick=()=>{
  running=!running;
  document.getElementById("pauseBtn").textContent=running?"Pause":"Resume";
};
document.getElementById("restartBtn").onclick=resetGame;
document.getElementById("soundBtn").onclick=()=>{
  soundOn = !soundOn;
  document.getElementById("soundBtn").textContent = soundOn?"Sound: On":"Sound: Off";
};

initGame();
</script>
</body>
</html>
